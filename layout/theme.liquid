<!doctype html>
<html class="no-js" lang="{{ request.locale.iso_code }}" dir="{{ settings.text_direction }}">
    <head>
        {% render 'wnw_header' %}
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta name="viewport" content="width=device-width,initial-scale=1">
        <meta name="theme-color" content="{{ settings.color_button }}">
        <link rel="canonical" href="{{ canonical_url }}">
        {% comment %}
        <link rel="preload" as="script" href="{{ 'theme.js' | asset_url }}">
        {% endcomment %}
        <link rel="preconnect" href="https://cdn.shopify.com" crossorigin>
        <link rel="preconnect" href="https://fonts.shopifycdn.com" crossorigin>
        <link rel="dns-prefetch" href="https://productreviews.shopifycdn.com">
        <link rel="dns-prefetch" href="https://ajax.googleapis.com">
        <link rel="dns-prefetch" href="https://maps.googleapis.com">
        <link rel="dns-prefetch" href="https://maps.gstatic.com">
        {%- if settings.favicon != blank -%}
            <link rel="shortcut icon" href="{{ settings.favicon | img_url: '32x32' }}" type="image/png" />
        {%- endif -%}
        {%- render 'seo-title' -%}
        {%- if page_description -%}
            <meta name="description" content="{{ page_description | escape }}">
        {%- endif -%}
        {%- render 'social-meta-tags' -%}
        {%- if shop.enabled_currencies.size > 1 -%}
            <link rel="stylesheet" href="{{ 'country-flags.css' | asset_url | split: '?' | first }}">
        {%- endif -%}
        {%- render 'font-face' -%}
        <link rel="stylesheet" href="{{ 'theme.css' | asset_url }}">
        <link rel="stylesheet" href="{{ 'themetim.css' | asset_url }}">      
        {%- render 'css-variables' -%}
        
        {%- liquid
            assign enableSuperScript = false
            unless shop.money_format contains 'money' or shop.money_format contains '.'
                if settings.superscript_decimals
                    if shop.money_format contains '{{amount}}' or shop.money_format contains '{{ amount }}'
                        assign enableSuperScript = true
                    elsif shop.money_format contains '{{amount_with_comma_separator}}' or shop.money_format contains '{{ amount_with_comma_separator }}'
                        assign enableSuperScript = true
                    endif
                endif
            endunless
        -%}
        
        <script>
            document.documentElement.className = document.documentElement.className.replace('no-js', 'js');
            window.theme = window.theme || {};
            theme.routes = {
                home: "{{ routes.root_url }}",
                collections: "{{ routes.collections_url }}",
                cart: "{{ routes.cart_url | append: '.js' }}",
                cartPage: "{{ routes.cart_url }}",
                cartAdd: "{{ routes.cart_add_url | append: '.js' }}",
                cartChange: "{{ routes.cart_change_url | append: '.js' }}",
                search: "{{ routes.search_url }}"
            };
            theme.strings = {
                soldOut: {{ 'products.product.sold_out' | t | json }},
                unavailable: {{ 'products.product.unavailable' | t | json }},
                inStockLabel: {{ 'products.product.in_stock_label' | t | json }},
                oneStockLabel: {{ 'products.product.stock_label.one' | t: count: '[count]' | json }},
                otherStockLabel: {{ 'products.product.stock_label.other' | t: count: '[count]' | json }},
                willNotShipUntil: {{ 'products.product.will_not_ship_until' | t: date: '[date]' | json }},
                willBeInStockAfter: {{ 'products.product.will_be_in_stock_after' | t: date: '[date]' | json }},
                waitingForStock: {{ 'products.product.waiting_for_stock' | t | json }},
                savePrice: {{ 'products.general.save_html' | t: saved_amount: '[saved_amount]' | json }},
                cartEmpty: {{ 'cart.general.empty' | t | json }},
                cartTermsConfirmation: {{ 'cart.general.terms_confirm' | t | json }},
                searchCollections: {{ 'general.search.collections' | t | json }},
                searchPages: {{ 'general.search.pages' | t | json }},
                searchArticles: {{ 'general.search.articles' | t | json }},
                maxQuantity: {{ 'cart.general.max_quantity' | t: quantity: '[quantity]', title: '[title]' | json }}
            };
            theme.settings = {
                cartType: {{ settings.cart_type | json }},
                isCustomerTemplate: {% if request.page_type contains 'customers/' %}true{% else %}false{% endif %},
                moneyFormat: {{ shop.money_format | json }},
                saveType: {{ settings.product_save_type | json }},
                productImageSize: {{ settings.product_grid_image_size | json }},
                productImageCover: {{ settings.product_grid_image_fill }},
                predictiveSearch: {{ settings.predictive_search_enabled }},
                predictiveSearchType: {{ settings.search_type | json }},
                superScriptSetting: {{ settings.superscript_decimals }},
                superScriptPrice: {{ enableSuperScript }},
                quickView: {{ settings.quick_shop_enable }},
                quickAdd: {{ settings.quick_add_enable }},
                themeName: 'Expanse',
                themeVersion: "4.3.1"
            };
        </script>
        {%- if request.design_mode or template contains 'cart' or template contains 'checkout' -%}
            {{ content_for_header }}
        {%- else -%}
            {% capture content_for_header2 %}{{ content_for_header }}{% endcapture %}
            {{ content_for_header2 | replace: ' defer="defer" ', ' type="lazyload_int" ' | replace: " src=", " data-src="| replace: "DOMContentLoaded", "w3-DOMContentLoaded" | replace: "window.addEventListener('load', asyncLoad, false);", "window.addEventListener('w3-DOMContentLoaded', asyncLoad, false);" | replace: "addEventListener('load', prefetchAssets);", "addEventListener('w3-DOMContentLoaded', prefetchAssets);" }}
            <script>var trekkie=[];trekkie.integrations=!0;window.BOOMR={},window.BOOMR.version=true;</script>
        {%- endif -%}
        {% if canonical_url contains '/pages/videos' %}
            <script defer src="{{ 'vendor-scripts-v2.js' | asset_url | split: '?' | first }}"></script>
            <script defer src="{{ 'theme.js' | asset_url }}"></script>
            <script defer src="{{ 'next.js' | asset_url }}"></script>
        {% else %}
            <script type="lazyload_int" data-src="{{ 'vendor-scripts-v2.js' | asset_url | split: '?' | first }}"></script>
            <script type="lazyload_int" data-src="{{ 'theme.js' | asset_url }}"></script>
            <script type="lazyload_int" data-src="{{ 'next.js' | asset_url }}"></script>
        {% endif %}
        {%- if request.page_type contains 'customers/' -%}
            <script src="{{ 'shopify_common.js' | shopify_asset_url }}" defer="defer"></script>
        {%- endif -%}
        {% if request.design_mode %}
            <script src="https://api.archetypethemes.co/design-mode.js" defer="defer"></script>
        {% endif %}
        <link type="text/css" href="{{ 'next.css' | asset_url }}" rel="stylesheet">
        <!-- START G4 Analytics 10-24-2022 ~ray -->
        <!-- Google tag (gtag.js) -->
        <script type="lazyload_int" data-src="https://www.googletagmanager.com/gtag/js?id=G-DHV8GG3RL4"></script>
        <script type="lazyload_int">
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
            gtag('config', 'G-DHV8GG3RL4');
        </script>
        <!-- END G4 Analytics 10-24-2022 ~ray -->
        {% render 'custom-css' %}
    </head>
    <body class="template-{{ template | replace: '.', ' ' | truncatewords: 1, '' | handle }}{% if request.path == '/challenge' %} template-challange{% endif %}" data-transitions="{{ settings.animate_page_transitions }}" data-button_style="{{ settings.button_style }}" data-edges="{{ settings.roundness }}" data-type_header_capitalize="{{ settings.type_header_capitalize }}" data-swatch_style="{{ settings.swatch_style }}" data-grid-style="{{ settings.product_grid_style }}">
        {% if settings.animate_page_transitions %}
            <script type="text/javascript">window.setTimeout(function() { document.body.className += " loaded"; }, 25);</script>
        {% endif %}
        <a class="in-page-link visually-hidden skip-link" href="#MainContent">{{ 'general.accessibility.skip_to_content' | t }}</a>
        <div id="PageContainer" class="page-container">
            <div class="transition-body">
                {%- sections 'header-group' -%}
                {%- sections 'popup-group' -%}
                <main class="main-content" id="MainContent">
                    {{ content_for_layout }}
                </main>
                {%- sections 'footer-group' -%}
            </div>
        </div>
        {%- liquid
            render 'video-modal'
            render 'photoswipe-template'
            if settings.quick_add_enable
                render 'quick-add-modal'
            endif
            render 'tool-tip'
        -%}
        <div id="ProductModals"></div>
        {% comment %} Image markup used when building product grid item via JS {% endcomment %}
        <template id="naturalImageMarkup">
            <div class="image-wrap" style="height: 0;">
                <image-element>
                    <img class="grid-product__image lazyload" width height src srcset loading="lazy" alt>
                </image-element>
            </div>
        </template>
        <template id="fixedRatioImageMarkup">
            <div class="grid__image-ratio">
                <image-element>
                    <img class="lazyload" width height src srcset loading="lazy" alt>
                </image-element>
            </div>
        </template>
        <template id="articleImageMarkup">
            <image-element>
                <img class="lazyload" width height src loading="lazy">
            </image-element>
        </template>
        {% comment %}
        {% include 'booster-discounts' %}
        {% endcomment %}
        {% include 'ba-discounts' %}
        <script type="lazyload_int">
            setInterval(function(){
                if(document.querySelector('.product-block .rte p > iframe') != null ){
                    document.querySelectorAll('.product-block .rte p > iframe[src*="youtube.com/embed"]').forEach(iframe => {
                        wrapVideo(iframe);
                    });
                    document.querySelectorAll('.product-block .rte p > iframe[src*="player.vimeo"]').forEach(iframe => {
                        wrapVideo(iframe);
                    });            
                    function wrapVideo(iframe) {
                        iframe.src = iframe.src;
                        var wrapWith = document.createElement('div');
                        wrapWith.classList.add('video-wrapper');
                        theme.utils.wrap(iframe, wrapWith);
                    }
                }
            },1000);
        </script>
        <script data-src="https://code.jquery.com/jquery-3.7.1.min.js" type="lazyload_int"></script>
        <script>
            var site_nav_link_burger = true;
            document.addEventListener("DOMContentLoaded", function() {
                var icon_menu = document.querySelector("button.site-nav__link.mobile-nav-trigger");
                icon_menu.addEventListener("click", function() {
                    if(site_nav_link_burger) {
                        event.preventDefault();
                        site_nav_link_burger = false;
                    }
                });
            })
        </script>        
        {% render 'wnw_footer' %}
    </body>
</html>